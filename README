# MyCassandra is the project branched from Cassandra by Shunsuke Nakamura.
# With MyCassandra, you can exchange the Storage Engine from the original storage like BigTable (commitlog, memtable, sstable) to MySQL, Redis and others.
# This means that you can select the Storage Engine for according to the I/O pattern of applications.

# In default, you can select that.
# - BigTable
# - MySQL
# - Redis
# - MongoDB

# For example, if you want to use MySQL, 

# 1) add several statements at conf/cassandra.yaml (0.7~) or conf/storage-conf.xml (0.6~)

database: MySQL
sqlhost: 3306
sqluser: root
sqlpass: rootpass 

<DataBase>MySQL</DataBase>
<SQL>
		<SQLHost>localhost</SQLHost> # mysql host
    <SQLPort>3306</SQLPort> # mysql port
		<SQLUser>cassandra_user</SQLUser> # mysql connection user ("root" is easier but it is not secure.)
    <SQLPass>cA33anDra</SQLPass> # user password
</SQL>

# 2) You define the database schema at storage-conf.xml.

# Example, if you want to make "mykeyspace" keyspace and "mycf1","mycf2" column families in that.
# @0.7
keyspaces:
    - name: mykeyspace
      :
      column_families:
        - name: mycf1
          rowkeysize: 16
          columnfamilysize: 2048
          storageenginetype: InnoDB
          :
        - name: mycf2
          rowkeysize: 32
          columnfamilysize: 4096
          storageenginetype: MyISAM
          :

# @0.6
<Keyspaces>
  <Keyspace Name="mykeyspace">
    <ColumnFamily Name="mycf1" RowKeySize="16" ColumnFamilySize="2048" ColumnFamilyType="VARBINARY" CompareWith="BytesType" StorageEngineType="InnoDB" />
    <ColumnFamily Name="mycf2" RowKeySize="32" ColumnFamilySize="4096" ColumnFamilyType="VARBINARY" CompareWith="BytesType" StorageEngineType="MyISAM" />
    <ReplicaPlacementStrategy>org.apache.cassandra.locator.RackAwareStrategy</ReplicaPlacementStrategy>
    <ReplicationFactor>1</ReplicationFactor>
    <EndPointSnitch>org.apache.cassandra.locator.EndPointSnitch</EndPointSnitch>
  </Keyspace>
</Keyspaces>

# * MySQL automally make table according to 'RowKeySize', 'ColumnFamilySize' and 'storageEngineType'.

# 3) mysql setup.
# * In the case of MyCassandra-0.7.5~, the following configurations are not required. ) 
# - You make mysql user.

 GRANT cassandra_user

# * cassandra_user needs to have all privileges.

# * In the case of MyCassandra-0.7.5~, the following configurations are not required. ) 
# - You make database by the keyspaces.

 mysql> CREATE DATABASE system; # 'system' is the Cassandra's internal keyspace.
 mysql> CREATE DATABASE <keyspace_name>; # <keyspace_name> is the keyspace name defined by storage-conf.xml

# In the above example, you must make database as this,
 mysql> CREATE DATABASE table;

# 4) run.
# You can run MyCassandra as Cassandra.

$ cd <MyCassandra_Home>
$ ./bin/cassandra

# If you have something, please contact me!!
# E-mail: sunsuk7tp at gmail.com
# Twitter: @MyCassandraJP, @sunsuk7tp
